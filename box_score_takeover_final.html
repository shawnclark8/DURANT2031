<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Team Takeover Box Score</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #ffffff;
      margin: 0;
      padding: 20px;
      color: #000000;
    }
    .logo {
      display: block;
      margin: 0 auto 20px auto;
      max-width: 300px;
      height: auto;
    }
    h1 {
      text-align: center;
      color: #E65300;
      margin-bottom: 30px;
    }
    .team-section {
      margin-bottom: 40px;
    }
    .team-name {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th {
      background-color: #E65300;
      color: #ffffff;
      padding: 8px;
      text-align: center;
    }
    td {
      border: 1px solid #dddddd;
      padding: 8px;
      text-align: center;
    }
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>
  <img src="team_takeover_logo_resized.png" alt="Team Takeover Logo" class="logo">
  <h1>Team Takeover - Official Box Score</h1>

  <div class="team-section">
    <div class="team-name">Team Takeover</div>
    <table>
      <thead>
        <tr>
          <th>Player</th><th>FG</th><th>FG%</th><th>3PT</th><th>3PT%</th><th>FT</th><th>FT%</th>
          <th>OREB</th><th>DREB</th><th>REB</th><th>AST</th><th>STL</th><th>BLK</th><th>TO</th><th>PTS</th>
        </tr>
      </thead>
      <tbody id="home-stats"></tbody>
    </table>
  </div>

  <div class="team-section">
    <div class="team-name">Opponent</div>
    <table>
      <thead>
        <tr>
          <th>Player</th><th>FG</th><th>FG%</th><th>3PT</th><th>3PT%</th><th>FT</th><th>FT%</th>
          <th>OREB</th><th>DREB</th><th>REB</th><th>AST</th><th>STL</th><th>BLK</th><th>TO</th><th>PTS</th>
        </tr>
      </thead>
      <tbody id="opponent-stats"></tbody>
    </table>
  </div>

  <script>
    const players = JSON.parse(localStorage.getItem("players")) || { home: [], opponent: [] };

    function calculateStats(player) {
      const fgMade = player["2pm"] + player["3pm"];
      const fgAtt = fgMade + player["2pmissed"] + player["3pmissed"];
      const fgPct = fgAtt ? ((fgMade / fgAtt) * 100).toFixed(1) + "%" : "0%";

      const threeAtt = player["3pm"] + player["3pmissed"];
      const threePct = threeAtt ? ((player["3pm"] / threeAtt) * 100).toFixed(1) + "%" : "0%";

      const ftAtt = player["ftm"] + player["ftmissed"];
      const ftPct = ftAtt ? ((player["ftm"] / ftAtt) * 100).toFixed(1) + "%" : "0%";

      const totalReb = player["oreb"] + player["dreb"];
      const points = (2 * player["2pm"]) + (3 * player["3pm"]) + player["ftm"];

      return {
        fg: `${fgMade}-${fgAtt}`,
        fgPct,
        threePt: `${player["3pm"]}-${threeAtt}`,
        threePct,
        ft: `${player["ftm"]}-${ftAtt}`,
        ftPct,
        oreb: player["oreb"],
        dreb: player["dreb"],
        reb: totalReb,
        ast: player["assists"],
        stl: player["stl"],
        blk: player["blk"],
        to: player["to"],
        pts: points
      };
    }

    function renderTeamStats(team, elementId) {
      const tbody = document.getElementById(elementId);
      players[team].forEach(player => {
        if (player.dnp) return;
        const stats = calculateStats(player);
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${player.name}</td><td>${stats.fg}</td><td>${stats.fgPct}</td><td>${stats.threePt}</td>
          <td>${stats.threePct}</td><td>${stats.ft}</td><td>${stats.ftPct}</td>
          <td>${stats.oreb}</td><td>${stats.dreb}</td><td>${stats.reb}</td><td>${stats.ast}</td>
          <td>${stats.stl}</td><td>${stats.blk}</td><td>${stats.to}</td><td>${stats.pts}</td>
        `;
        tbody.appendChild(row);
      });
    }

    renderTeamStats("home", "home-stats");
    renderTeamStats("opponent", "opponent-stats");
  </script>
</body>
</html>
