
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Box Score Button Debug</title>
</head>
<body>

<h1>Test Tracker â€“ DEBUG VERSION</h1>
<button id="boxScoreBtn">BOX SCORE</button>

<script>
const players = {
  home: [
    { name: "Kam", "2pm": 4, "2pmissed": 1, "3pm": 2, "3pmissed": 2, "ftm": 3, "ftmissed": 1, "oreb": 1, "dreb": 4, "assists": 2, "stl": 1, "blk": 0, "to": 1, dnp: false }
  ],
  opponent: [
    { name: "Opponent", "2pm": 3, "2pmissed": 3, "3pm": 1, "3pmissed": 2, "ftm": 2, "ftmissed": 1, "oreb": 2, "dreb": 3, "assists": 1, "stl": 1, "blk": 1, "to": 2, dnp: false }
  ]
};

function openBoxScore() {
  console.log("Box Score button clicked.");
  const win = window.open("box_score_takeover.html", "_blank");
  if (!win) {
    console.error("Popup blocked or window not opened.");
    return;
  }

  const transfer = () => {
    try {
      win.players = players;
      console.log("Players object transferred.");
    } catch (e) {
      console.error("Transfer failed:", e);
    }
  };

  win.onload = transfer;

  const interval = setInterval(() => {
    try {
      if (win.players === undefined) {
        win.players = players;
        console.log("Players object injected via interval.");
      } else {
        clearInterval(interval);
      }
    } catch (e) {}
  }, 100);
}

document.getElementById("boxScoreBtn").addEventListener("click", openBoxScore);
</script>

</body>
</html>
